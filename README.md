# Фильтр желтушных новостей

Реализовн Асинхронный веб-сервер, получающий от клиента запрос со списком url статей и возвращающий клиенту JSON с информацией о "рейтинге желтушности" каждой из статей. Рейтинг рассчитывается по частоте повторения в статье слов, характерных для "жёлтой" прессы.

Пример запроса клиента:
```
GET  /?urls=https://inosmi.ru/politic/20210425/249628769.html,https://inosmi.ru/politic/20210425/249629175.html,https://inosmi.ru/social/20210425/249628917.html
```
Пример ответа сервера:
```
HTTP/0.9 200 OK
Content-Type: application/json; charset=utf-8
Content-Length: 340
Date: Mon, 10 May 2021 11:49:24 GMT
Server: Python/3.8 aiohttp/3.7.4.post0

[{"status": "OK", "url": "https://inosmi.ru/politic/20210425/249628769.html", "score": 0.64, "words_count": 785}, {"status": "OK", "url": "https://inosmi.ru/social/20210425/249628917.html", "score": 0.94, "words_count": 1060}, {"status": "OK", "url": "https://inosmi.ru/politic/20210425/249629175.html", "score": 1.41, "words_count": 1203}]

```

Пока поддерживается только один новостной сайт - [ИНОСМИ.РУ](https://inosmi.ru/). Для него разработан специальный адаптер, умеющий выделять текст статьи на фоне остальной HTML разметки. Для других новостных сайтов потребуются новые адаптеры, все они будут находиться в каталоге `adapters`. Туда же помещен код для сайта ИНОСМИ.РУ: `adapters/inosmi_ru.py`.

В перспективе можно создать универсальный адаптер, подходящий для всех сайтов, но его разработка будет сложной и потребует дополнительных времени и сил.

# Как установить

Вам понадобится Python версии 3.7 или старше. Для установки пакетов рекомендуется создать виртуальное окружение.

Первым шагом установите пакеты:

```python3
pip install -r requirements.txt
```

# Как запустить

```python3
python main.py
```

# Как запустить тесты

Для тестирования используется [pytest](https://docs.pytest.org/en/latest/), тестами покрыты фрагменты кода сложные в отладке: text_tools.py, адаптеры и функция обработки url. Команды для запуска тестов:

```
python -m pytest adapters/inosmi_ru.py
```

```
python -m pytest text_tools.py
```
```
python -m pytest main.py
```
# Цели проекта

Код написан в учебных целях. Это урок из курса по веб-разработке — [Девман](https://dvmn.org).
